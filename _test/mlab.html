<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>

    <!--<script src="../lib/xdr.js"></script>-->
    <script src="../lib/jquery/jquery-2.1.1.js"></script>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js"></script>
    <script src="../NwConn/NwMLabApiConn.js"></script>

    <script>

        //$.getJSON('//ip-api.com/json?callback=?', function (data) {//150 requests per minute = 9000/hr //best geolocation

        //    mlabApiConn.k = "32KYjlie99BH6Euf8x98GQaOVbXAj-Zw";
        //    mlabApiConn.insert('connectlog', 'data', { ip: data.query, data: data, type: 'ip-api', date: new Date() });
        //});
        var key = 'var r=b[n>>>2]>>>24-8*(n%4)&255;';
        mlabApiConn.k = "32KYjlie99BH6Euf8x98GQaOVbXAj-Zw";
        //mlabApiConn.insert('connectlog', 'data', { ip: data.query, data: data, type: 'ip-api', date: new Date() });

        mlabApiConn.findOne('nwdict', 'data', { esearch: 'test' }, function (data) {
            //console.log(data);
            var val = CryptoJS.AES.decrypt(data.dt, key);

            var dataObj = JSON.parse(val.toString(CryptoJS.enc.Utf8));

            console.log(dataObj);// val.toString(CryptoJS.enc.Utf8).split('\n').length );

        });

        mlabApiConn.count('nwdict', 'data', {  }, function (data) {
            //console.log(data);

            console.log(data);// val.toString(CryptoJS.enc.Utf8).split('\n').length );

        });
        //conn.insert('', '', {}, {});

    </script>

    <script type="application/javascript">
         
    </script>
</head>
<body>
</body>
</html>
