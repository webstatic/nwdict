var app=app||{models:{},collections:{},views:{}};(function($){"use strict";function createHtmlEntry(entryObj){var $entry=$("<small>##nwsmall##</small>");var meaningArry=[];if(entryObj.lMn){var meaningStrArry=[];for(var i in entryObj.lMn){var mn=entryObj.lMn[i];var tentry=mn.tentry.trim();var meaningLineStr=" "+tentry;if(mn.etDf){meaningLineStr="["+mn.etDf.trim()+"]"+meaningLineStr}if(mn.ecat){meaningLineStr="["+mn.ecat+"]"+meaningLineStr}if(mn.ethai){meaningLineStr+=", "+mn.ethai}if(mn.esyn){meaningLineStr+=" §{"+mn.esyn.replace(/; /g,", ")+"}"}if(mn.eant){meaningLineStr+=" ☯{"+mn.eant.replace(/; /g,", ")+"}"}meaningStrArry.push(meaningLineStr)}meaningArry.push(meaningStrArry.join("<br>"))}if(entryObj.hope){var mn=entryObj.hope.mn;var meaningStrArry=[];for(var i in mn){var entry=mn[i];var tentry=entry.tentry.trim();var meaningLineStr=" "+tentry;meaningStrArry.push(meaningLineStr)}if(entryObj.hope.esyn){meaningStrArry.push("[§] "+entryObj.hope.esyn)}if(entryObj.hope.eant){meaningStrArry.push("[☯] "+entryObj.hope.eant)}if(entryObj.hope.confer){meaningStrArry.push("[C] "+entryObj.hope.confer)}meaningArry.push(meaningStrArry.join("<br>"))}if(entryObj.sabai&&entryObj.sabai.mn){var meaningStrArry=[];for(var i in entryObj.sabai.mn){var mn=entryObj.sabai.mn[i];var tentry=mn.tentry.trim();var meaningLineStr=" "+tentry;if(mn.ecat){meaningLineStr="["+mn.ecat+"]"+meaningLineStr}meaningStrArry.push(meaningLineStr)}meaningArry.push(meaningStrArry.join("<br>"))}if(entryObj.stm){var mn=entryObj.stm.mn;var meaningStrArry=[];var ecatGrop={};var count=0;for(var i in mn){var entry=mn[i];var tentry=entry.tentry.trim();if(!entry.ecat){entry.ecat=""}if(!_.has(ecatGrop,entry.ecat)){ecatGrop[entry.ecat]=[]}ecatGrop[entry.ecat].push(tentry)}_.each(ecatGrop,function(arr,ecat){if(ecat!=""){ecat="["+ecat+"] "}if(arr.length==1){if(ecat==""){meaningStrArry.push(arr[0])}else{meaningStrArry.push(ecat+arr[0])}}else{_.each(arr,function(tentry,i){if(i==0){meaningStrArry.push(ecat+" • "+tentry)}else{meaningStrArry.push("• "+tentry)}})}});if(meaningStrArry.length==0){console.log(entryObj.esearch)}if(entryObj.stm.esyn){meaningStrArry.push("[§] "+entryObj.stm.esyn)}if(entryObj.stm.eant){meaningStrArry.push("[☯] "+entryObj.stm.eant)}if(entryObj.stm.confer){meaningStrArry.push("[C] "+entryObj.stm.confer)}meaningArry.push(meaningStrArry.join("<br>"))}if(entryObj.ldMn){var mn=entryObj.ldMn.mn;var meaningStrArry=[];for(var i in mn){var entry=mn[i];var tentry=entry.tentry.trim();var meaningLineStr=" "+tentry;if(entry.ecat){meaningLineStr="["+entry.ecat+"]"+meaningLineStr}else{}meaningStrArry.push(meaningLineStr)}if(entryObj.ldMn.esyn){meaningStrArry.push("[§] "+entryObj.ldMn.esyn)}if(entryObj.ldMn.eant){meaningStrArry.push("[☯] "+entryObj.ldMn.eant)}if(entryObj.ldMn.confer){meaningStrArry.push("[C] "+entryObj.ldMn.confer)}meaningArry.push(meaningStrArry.join("<br>"))}if(entryObj.loy){var mn=entryObj.loy.mn;var meaningStrArry=[];for(var i in mn){var entry=mn[i];var tentry=entry.tentry.trim();var meaningLineStr=" "+tentry;meaningStrArry.push(meaningLineStr)}if(entryObj.loy.esyn){meaningStrArry.push("[§] "+entryObj.loy.esyn)}if(entryObj.loy.eant){meaningStrArry.push("[☯] "+entryObj.loy.eant)}if(entryObj.loy.confer){meaningStrArry.push("[C] "+entryObj.loy.confer)}meaningArry.push(meaningStrArry.join("<br>"))}if(entryObj.telex){var entry=entryObj.telex;var tentry=entry.tentry.trim();var meaningLineStr=" "+tentry;if(entry.ecat){meaningLineStr="["+entry.ecat+"]"+meaningLineStr}meaningArry.push(meaningLineStr)}if(entryObj.vlb){var entry=entryObj.vlb;var tentry=entry.tentry.trim();var meaningLineStr=" "+tentry;if(entry.ecat){meaningLineStr="["+entry.ecat+"]"+meaningLineStr}meaningArry.push(meaningLineStr)}if(entryObj.qr){var mn=entryObj.qr.mn;var meaningStrArry=[];for(var i in mn){var entry=mn[i];var tentry=entry.tentry.trim();var meaningLineStr=" "+tentry;meaningStrArry.push(meaningLineStr)}if(entryObj.qr.esyn){meaningStrArry.push("[§] "+entryObj.qr.esyn)}if(entryObj.qr.eant){meaningStrArry.push("[☯] "+entryObj.qr.eant)}if(entryObj.qr.confer){meaningStrArry.push("[C] "+entryObj.qr.confer)}meaningArry.push(meaningStrArry.join("<br>"))}var smallStr=meaningArry.join("<br>---<br>");var entryHtmlStr=$entry.html().replace("##nwsmall##",smallStr);return entryHtmlStr}app.views.WordEachView=Backbone.View.extend({tagName:"div",className:"WordEachView jqm-content",events:{},initialize:function(){var self=this;this.model.on("destroy",this.remove,this);this.model.on("remove",this.remove,this);this.WordTemplate=_.template($("#WordTemplate").html())},render:function(){var templateObj=this.createWordTemplateObj(this.model);this.$el.html(this.WordTemplate(templateObj));this.$el.find(".cont").html(templateObj.mn);this.$el.attr("data-word",this.model.get("esearch"));return this},createWordTemplateObj:function(model){var wordObj=model.toJSON();var templateObj={esearch:wordObj.esearch,pros:"",proThs:"",mn:""};templateObj.pros=wordObj.pro?wordObj.pro.join(" , "):"";templateObj.proThs=wordObj.proTh?wordObj.proTh:"";templateObj.mn=createHtmlEntry(wordObj);return templateObj},remove:function(){var self=this;self.$el.remove()}})})(jQuery);